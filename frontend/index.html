<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoGuru Universal - Content Analysis Demo</title>
    <style>
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 40px;
        }

        @media (max-width: 968px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        /* Card Styles */
        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.12);
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #555;
        }

        textarea {
            width: 100%;
            min-height: 150px;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 16px;
            resize: vertical;
            transition: border-color 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 16px;
            background-color: white;
            cursor: pointer;
        }

        /* Checkbox Group */
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .checkbox-wrapper {
            display: flex;
            align-items: center;
        }

        .checkbox-wrapper input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin-right: 8px;
            cursor: pointer;
        }

        .checkbox-wrapper label {
            margin-bottom: 0;
            font-weight: normal;
            cursor: pointer;
        }

        /* Buttons */
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f0f2f5;
            color: #333;
            margin-right: 10px;
        }

        .btn-secondary:hover {
            background: #e1e4e8;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Demo Examples */
        .demo-examples {
            margin-top: 20px;
        }

        .demo-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .demo-btn {
            padding: 8px 16px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .demo-btn:hover {
            background: #e9ecef;
            border-color: #adb5bd;
        }

        /* Results Section */
        .results-section {
            display: none;
        }

        .results-section.active {
            display: block;
        }

        .result-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }

        .result-card h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .result-item {
            margin-bottom: 12px;
            padding: 10px;
            background: white;
            border-radius: 6px;
        }

        .confidence-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.5s ease;
        }

        .platform-score {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: white;
            border-radius: 6px;
            margin-bottom: 8px;
        }

        .score-value {
            font-weight: 600;
            color: #667eea;
        }

        /* Generated Content */
        .content-variation {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            position: relative;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 6px 12px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
        }

        .copy-btn:hover {
            background: #5a5fc9;
        }

        /* Hashtags */
        .hashtag-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .hashtag {
            background: #e9ecef;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            color: #495057;
        }

        /* Loading Spinner */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Error Messages */
        .error-message {
            background: #fee;
            color: #c33;
            padding: 12px;
            border-radius: 6px;
            margin-top: 10px;
            display: none;
        }

        .error-message.active {
            display: block;
        }

        /* Success Messages */
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 12px;
            border-radius: 6px;
            margin-top: 10px;
            display: none;
        }

        .success-message.active {
            display: block;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>AutoGuru Universal</h1>
            <p>AI Content Analysis for Any Business</p>
        </div>
    </header>

    <div class="container">
        <div class="main-content">
            <!-- Input Section -->
            <div class="card">
                <h2>Content Analysis</h2>
                
                <div class="form-group">
                    <label for="contentInput">Business Content</label>
                    <textarea 
                        id="contentInput" 
                        placeholder="Paste your business content here... This could be your website copy, social media posts, product descriptions, or any text that represents your business."
                    ></textarea>
                </div>

                <div class="form-group">
                    <label for="businessType">Business Type</label>
                    <select id="businessType">
                        <option value="auto-detect">Auto-detect</option>
                        <option value="fitness">Fitness & Wellness</option>
                        <option value="business">Business Consulting</option>
                        <option value="creative">Creative Professional</option>
                        <option value="education">Education & Courses</option>
                        <option value="ecommerce">E-commerce & Retail</option>
                        <option value="local">Local Services</option>
                        <option value="tech">Technology & SaaS</option>
                        <option value="nonprofit">Non-profit</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Target Platforms</label>
                    <div class="checkbox-group">
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="instagram" checked>
                            <label for="instagram">Instagram</label>
                        </div>
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="linkedin" checked>
                            <label for="linkedin">LinkedIn</label>
                        </div>
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="tiktok" checked>
                            <label for="tiktok">TikTok</label>
                        </div>
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="youtube">
                            <label for="youtube">YouTube</label>
                        </div>
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="facebook">
                            <label for="facebook">Facebook</label>
                        </div>
                    </div>
                </div>

                <button id="analyzeBtn" class="btn btn-primary" onclick="analyzeContent()">
                    Analyze Content
                </button>

                <div class="demo-examples">
                    <label>Try Demo Examples:</label>
                    <div class="demo-buttons">
                        <button class="demo-btn" onclick="loadExample('fitness')">Fitness Studio</button>
                        <button class="demo-btn" onclick="loadExample('business')">Business Coach</button>
                        <button class="demo-btn" onclick="loadExample('photographer')">Photographer</button>
                        <button class="demo-btn" onclick="loadExample('educator')">Online Educator</button>
                    </div>
                </div>

                <div class="error-message" id="errorMessage"></div>
                <div class="success-message" id="successMessage"></div>
            </div>

            <!-- Results Section -->
            <div class="card">
                <h2>Analysis Results</h2>
                
                <div class="loading" id="loadingSection">
                    <div class="spinner"></div>
                    <p>Analyzing your content with AI...</p>
                </div>

                <div class="results-section" id="resultsSection">
                    <!-- Business Niche Detection -->
                    <div class="result-card">
                        <h3>Business Niche Detection</h3>
                        <div id="nicheResults"></div>
                    </div>

                    <!-- Target Audience -->
                    <div class="result-card">
                        <h3>Target Audience Analysis</h3>
                        <div id="audienceResults"></div>
                    </div>

                    <!-- Brand Voice -->
                    <div class="result-card">
                        <h3>Brand Voice Characteristics</h3>
                        <div id="brandVoiceResults"></div>
                    </div>

                    <!-- Viral Potential -->
                    <div class="result-card">
                        <h3>Viral Potential Scores</h3>
                        <div id="viralScores"></div>
                    </div>

                    <!-- Generated Content -->
                    <div class="result-card">
                        <h3>Generated Viral Content</h3>
                        <button class="btn btn-secondary" onclick="generateViralContent()">
                            Generate Platform-Optimized Content
                        </button>
                        <div id="generatedContent" style="margin-top: 20px;"></div>
                    </div>

                    <!-- Hashtags -->
                    <div class="result-card">
                        <h3>Optimized Hashtags</h3>
                        <div id="hashtagResults"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // API Configuration
        const API_BASE_URL = 'http://localhost:8000/api/v1';

        // Demo Examples
        const demoExamples = {
            fitness: {
                content: "Transform your body with our revolutionary 8-week HIIT program! 🔥 Our certified trainers combine cutting-edge fitness science with personalized nutrition plans. Join thousands who've achieved their dream physique through our proven methodology. Whether you're a beginner or advanced athlete, we'll push you to new limits. Experience the power of community support, expert guidance, and results that speak for themselves. Your fitness journey starts here!",
                type: "fitness"
            },
            business: {
                content: "Scale your consulting business to 7 figures with our proven frameworks and systems. As a business strategist with 15+ years experience, I help ambitious consultants build predictable revenue streams, automate client acquisition, and create leveraged service offerings. My clients typically 3x their revenue within 12 months while working fewer hours. Ready to transform your expertise into a thriving business empire?",
                type: "business"
            },
            photographer: {
                content: "Capture life's precious moments with artistic vision and technical excellence. Specializing in wedding photography, portraits, and lifestyle shoots. My style blends candid emotion with stunning composition, creating timeless images that tell your unique story. Using state-of-the-art equipment and creative lighting techniques, I ensure every shot is magazine-worthy. Let's create visual magic together!",
                type: "creative"
            },
            educator: {
                content: "Master data science and machine learning with our comprehensive online bootcamp. Learn Python, R, SQL, and cutting-edge AI techniques from industry experts. Our project-based curriculum ensures you build a professional portfolio while mastering real-world skills. With 1-on-1 mentorship, career coaching, and lifetime access to materials, you'll be job-ready in just 6 months. Join 5000+ graduates now working at top tech companies!",
                type: "education"
            }
        };

        // Load demo example
        function loadExample(exampleKey) {
            const example = demoExamples[exampleKey];
            if (example) {
                document.getElementById('contentInput').value = example.content;
                document.getElementById('businessType').value = example.type;
                showSuccess('Demo content loaded! Click "Analyze Content" to see results.');
            }
        }

        // Get selected platforms
        function getSelectedPlatforms() {
            const platforms = [];
            const checkboxes = document.querySelectorAll('.checkbox-wrapper input[type="checkbox"]:checked');
            checkboxes.forEach(checkbox => {
                platforms.push(checkbox.id);
            });
            return platforms;
        }

        // Show/hide UI elements
        function showLoading() {
            document.getElementById('loadingSection').classList.add('active');
            document.getElementById('resultsSection').classList.remove('active');
            hideMessages();
        }

        function hideLoading() {
            document.getElementById('loadingSection').classList.remove('active');
        }

        function showResults() {
            document.getElementById('resultsSection').classList.add('active');
        }

        function showError(message) {
            const errorEl = document.getElementById('errorMessage');
            errorEl.textContent = message;
            errorEl.classList.add('active');
            setTimeout(() => errorEl.classList.remove('active'), 5000);
        }

        function showSuccess(message) {
            const successEl = document.getElementById('successMessage');
            successEl.textContent = message;
            successEl.classList.add('active');
            setTimeout(() => successEl.classList.remove('active'), 5000);
        }

        function hideMessages() {
            document.getElementById('errorMessage').classList.remove('active');
            document.getElementById('successMessage').classList.remove('active');
        }

        // Analyze content
        async function analyzeContent() {
            const content = document.getElementById('contentInput').value.trim();
            const businessType = document.getElementById('businessType').value;
            const platforms = getSelectedPlatforms();

            if (!content) {
                showError('Please enter some business content to analyze.');
                return;
            }

            if (platforms.length === 0) {
                showError('Please select at least one platform.');
                return;
            }

            showLoading();

            try {
                const response = await fetch(`${API_BASE_URL}/content/analyze`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        content: content,
                        business_type: businessType === 'auto-detect' ? null : businessType,
                        platforms: platforms
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                displayResults(data);
                hideLoading();
                showResults();
                showSuccess('Content analyzed successfully!');
            } catch (error) {
                console.error('Error analyzing content:', error);
                hideLoading();
                showError('Failed to analyze content. Please ensure the backend server is running.');
            }
        }

        // Display analysis results
        function displayResults(data) {
            // Business Niche Detection
            const nicheHtml = `
                <div class="result-item">
                    <strong>Detected Niche:</strong> ${data.niche || 'Unknown'}
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: ${(data.niche_confidence || 0) * 100}%"></div>
                    </div>
                    <small>Confidence: ${((data.niche_confidence || 0) * 100).toFixed(1)}%</small>
                </div>
            `;
            document.getElementById('nicheResults').innerHTML = nicheHtml;

            // Target Audience
            const audienceHtml = data.target_audience ? `
                <div class="result-item">
                    <strong>Primary Audience:</strong> ${data.target_audience.primary || 'Not identified'}
                </div>
                <div class="result-item">
                    <strong>Demographics:</strong> ${data.target_audience.demographics || 'Not identified'}
                </div>
                <div class="result-item">
                    <strong>Pain Points:</strong> ${data.target_audience.pain_points || 'Not identified'}
                </div>
            ` : '<div class="result-item">No audience data available</div>';
            document.getElementById('audienceResults').innerHTML = audienceHtml;

            // Brand Voice
            const brandVoiceHtml = data.brand_voice ? `
                <div class="result-item">
                    <strong>Tone:</strong> ${data.brand_voice.tone || 'Not identified'}
                </div>
                <div class="result-item">
                    <strong>Style:</strong> ${data.brand_voice.style || 'Not identified'}
                </div>
                <div class="result-item">
                    <strong>Key Themes:</strong> ${data.brand_voice.themes ? data.brand_voice.themes.join(', ') : 'Not identified'}
                </div>
            ` : '<div class="result-item">No brand voice data available</div>';
            document.getElementById('brandVoiceResults').innerHTML = brandVoiceHtml;

            // Viral Potential Scores
            if (data.viral_scores) {
                let scoresHtml = '';
                for (const [platform, score] of Object.entries(data.viral_scores)) {
                    scoresHtml += `
                        <div class="platform-score">
                            <span>${platform.charAt(0).toUpperCase() + platform.slice(1)}</span>
                            <span class="score-value">${(score * 100).toFixed(0)}%</span>
                        </div>
                    `;
                }
                document.getElementById('viralScores').innerHTML = scoresHtml;
            }

            // Store analysis ID for content generation
            window.currentAnalysisId = data.analysis_id;
        }

        // Generate viral content
        async function generateViralContent() {
            if (!window.currentAnalysisId) {
                showError('Please analyze content first before generating variations.');
                return;
            }

            const contentDiv = document.getElementById('generatedContent');
            contentDiv.innerHTML = '<p>Generating viral content variations...</p>';

            try {
                const response = await fetch(`${API_BASE_URL}/content/generate-viral`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        analysis_id: window.currentAnalysisId,
                        platforms: getSelectedPlatforms()
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                displayGeneratedContent(data);
            } catch (error) {
                console.error('Error generating content:', error);
                contentDiv.innerHTML = '<p style="color: #c33;">Failed to generate content. Please try again.</p>';
            }
        }

        // Display generated content
        function displayGeneratedContent(data) {
            let html = '';
            
            if (data.content_variations) {
                for (const [platform, content] of Object.entries(data.content_variations)) {
                    html += `
                        <div class="content-variation">
                            <button class="copy-btn" onclick="copyToClipboard('${content.replace(/'/g, "\\'")}')">Copy</button>
                            <strong>${platform.charAt(0).toUpperCase() + platform.slice(1)}:</strong>
                            <p>${content}</p>
                        </div>
                    `;
                }
            }

            // Display hashtags
            if (data.hashtags) {
                const hashtagsHtml = `
                    <div class="hashtag-container">
                        ${data.hashtags.map(tag => `<span class="hashtag">${tag}</span>`).join('')}
                    </div>
                `;
                document.getElementById('hashtagResults').innerHTML = hashtagsHtml;
            }

            document.getElementById('generatedContent').innerHTML = html;
        }

        // Copy to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showSuccess('Content copied to clipboard!');
            }).catch(() => {
                showError('Failed to copy content.');
            });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            // Check all platform checkboxes by default
            document.querySelectorAll('.checkbox-wrapper input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = true;
            });
        });
    </script>
</body>
</html>